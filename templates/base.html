<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ pageTitle }} - WhiteboardAssistant</title>
    <!-- Stylesheet Links -->
    <link rel="stylesheet" href="/css/style.css" id="theme-style">
    <!-- Dark Mode Style (You can either include this in your existing CSS file or create a separate one) -->
    <style>
        body.dark-mode {
            background-color: #333;
            color: #ddd;
        }
        nav ul li a {
            color: inherit; /* Ensures the nav link color inherits from body */
        }
        /* Add any other dark mode specific styles here */
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/features">Features</a></li>
                <li><a href="/about">About</a></li>
                <li><a href="/contact">Contact Us</a></li>
                <!-- Toggle button for Dark Mode -->
                <li><button id="dark-mode-toggle">Toggle Dark Mode</button></li>
                <!-- Display logout if user is logged in, otherwise show Login/Register -->
                {{#if userLoggedIn}}
                <li><a href="/logout">Logout</a></li>
                {{else}}
                <li><a href="/login">Login/Register</a></li>
                {{/if}}
            </ul>
        </nav>
    </header>

    <!-- Main Content Area -->
    <main>
        <!-- This area will be dynamically filled with page-specific content -->
        {{> body }}
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2023 WhiteboardAssistant. All rights reserved.</p>
    </footer>

    <!-- Scripts -->
    <script src="/js/script.js"></script>
    <script>
        // JavaScript for toggling dark mode
        const toggleButton = document.getElementById('dark-mode-toggle');
        toggleButton.addEventListener('click', function() {
            document.body.classList.toggle('dark-mode');
            // Save the user's preference to localStorage
            if(document.body.classList.contains('dark-mode')) {
                localStorage.setItem('theme', 'dark');
            } else {
                localStorage.setItem('theme', 'light');
            }
        });

        // Check for saved user preference, if any, on page reload
        if(localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-mode');
        }
    </script>
</body>
</html>